<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="generator" content="Hugo 0.56.3" />
    
    
    <link rel="stylesheet" href="https://damnotes.netlify.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://damnotes.netlify.com/css/style.css">
    
    
    <title>Pandas | DamNotes</title>
</head>

<body>
    
<div class="container border-bottom border-dark">
    <nav class="navbar navbar-light">
        <a class="navbar-brand" href="https://damnotes.netlify.com/">DamNotes</a>
        
        <ul class="navbar-nav">
            
            
            
            <li class=" nav-item active">
                <a class="nav-link" href="/about/"><i data-feather="user"></i> About<span
                        class="sr-only">(current)</span></a>
            </li>
            
        </ul>
    </nav>
</div>
    <div class="container">
        <main id="main">
            
<div class="d-flex flex-column align-items-center">
    <h2 class="m-1 mb-2 mt-2"><u>Pandas</u></h2>
</div>


<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#008000;font-weight:bold">import</span> <span style="color:#00f;font-weight:bold">pandas</span> <span style="color:#008000;font-weight:bold">as</span> <span style="color:#00f;font-weight:bold">pd</span>

<span style="color:#408080;font-style:italic"># df creations</span>
pd<span style="color:#666">.</span>Series([<span style="color:#008000">list</span>]) <span style="color:#408080;font-style:italic"># create a Series object</span>
pd<span style="color:#666">.</span>DataFrame(<span style="color:#008000">dict</span>) <span style="color:#408080;font-style:italic"># create df from dictionary</span>
pd<span style="color:#666">.</span>DataFrame(data<span style="color:#666">=</span>[<span style="color:#008000">list</span>], index<span style="color:#666">=</span>None,
			 columns<span style="color:#666">=</span>None, dtype<span style="color:#666">=</span>None,
			 copy<span style="color:#666">=</span>False) <span style="color:#408080;font-style:italic"># create df from list</span></code></pre></div>
<ul>
<li><code>df</code> → DataFrame</li>
<li><code>s</code> → Series</li>
<li>Jupyter Notebook <a href="https://bitbucket.org/hrojas/learn-pandas">lessons</a> on pandas</li>
</ul>

<hr />

<h3 id="file-i-o">File I/O</h3>

<p>Import file into a df</p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">df <span style="color:#666">=</span> pd<span style="color:#666">.</span>read_csv(r<span style="">’</span>relative_path<span style="">’</span>, <span style="color:#408080;font-style:italic">#can be a web address</span>
				sep <span style="color:#666">=</span> <span style="color:#ba2121">&#39; &#39;</span>,
                usecols <span style="color:#666">=</span> [<span style="color:#666">0</span>, <span style="color:#666">1</span>, <span style="color:#666">5</span>] <span style="color:#408080;font-style:italic"># columns to be returned from the file</span>
				names <span style="color:#666">=</span> [<span style="color:#ba2121">&#39;column1&#39;</span>,<span style="color:#ba2121">&#39;column2&#39;</span>,<span style="color:#666">...</span>],
				header <span style="color:#666">=</span> None, <span style="color:#408080;font-style:italic"># line of the header</span>
                nrows <span style="color:#666">=</span> <span style="color:#666">5</span>, <span style="color:#408080;font-style:italic"># number of rows to read</span>
				skiprows <span style="color:#666">=</span> <span style="color:#666">1</span>, <span style="color:#408080;font-style:italic"># rows to skip from top</span>
				skipfooter <span style="color:#666">=</span> <span style="color:#666">3</span>, <span style="color:#408080;font-style:italic"># rows to skip from bottom</span>
                <span style="color:#408080;font-style:italic">## if a list is provided, it will skip those rows</span>
				index_col <span style="color:#666">=</span> False, <span style="color:#408080;font-style:italic"># force to not use a column as the index of the rows</span>
				skipinitialspace <span style="color:#666">=</span> True, <span style="color:#408080;font-style:italic"># skip initial spaces after delimiter</span>
				parse_dates <span style="color:#666">=</span> [<span style="color:#666">0</span>], <span style="color:#408080;font-style:italic"># list of ints or column names containing date time format</span>
				infer_datetime_format <span style="color:#666">=</span> True <span style="color:#408080;font-style:italic"># infer time format and switch to faster loading (if possible)</span>
                )</code></pre></div>
<ul>
<li><p><code>pd.read_json(path)</code> → <strong>import</strong> .json into a df</p></li>

<li><p><code>pd.read_excel(path)</code> → <strong>import</strong> .xlsx into a df</p></li>

<li><p><code>pd.to_csv(path)</code>, <code>pd.to_json(path)</code> and <code>pd.to_excel(path)</code> → <strong>export</strong> to .csv, .json or .xlsx file</p></li>
</ul>

<hr />

<h3 id="df-properties"><code>df</code> properties</h3>

<ul>
<li><p><code>df.info()</code> → return informations about the dataframe</p></li>

<li><p><code>df.shape()</code> → return number of rows and columns (tuple)</p></li>

<li><p><code>df.head(n=5)</code>, <code>df.tail(n=5)</code> → prints the first or last <em>n</em> values</p></li>

<li><p><code>df.describe()</code> → return <strong>statistics</strong> on the column</p></li>

<li><p><code>df.values</code> → return the values in the <em>df</em> as an <strong>ndarray</strong></p></li>

<li><p><code>df.dtypes</code> → return <strong>type</strong> of each column</p></li>

<li><p><code>df['columnName'] = df['columnName'].astype(type)</code> → <strong>change the type</strong> of the column [<code>str</code> (printed as object), <code>int64</code>, <code>float64</code>]</p></li>
</ul>

<hr />

<h3 id="df-manipulation"><code>df</code> Manipulation</h3>

<ul>
<li><p><code>df.index</code> → access the indexes</p></li>

<li><p><code>df.reindex([list])</code> → reassign indexes manually</p></li>

<li><p><code>df.rename(columns={oldName1: newName1, ...}, inplace = True)</code> → <strong>rename</strong> columns</p></li>

<li><p><code>df = df.drop('columnName', axis=1)</code> → <strong>delete</strong> a column</p>

<ul>
<li>alternatively use <code>df.drop(columns='columnName', inplace=True)</code></li>
</ul></li>

<li><p><code>df = df.drop(indexNumber,axis=0)</code> → <strong>delete</strong> rows</p></li>

<li><p><code>df.insert(location, columnName, values)</code> → <strong>insert</strong> a new column in location</p></li>

<li><p><code>df.copy(deep=True)</code> → copy the <code>df</code> indices and data (<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html#pandas-dataframe-copy">doc</a>)</p></li>

<li><p><code>df.sort_values(['columnName'], ascending=False)</code> → <strong>sort</strong> values of <em>df</em></p></li>

<li><p><code>df[‘columnName’].unique()</code> → print the <strong>unique values</strong> of the column</p></li>

<li><p><code>name = df.groupby('columnName')</code> → create a <strong>groupby object</strong>. Then, apply methods to this objects [e.g. like <code>name.sum()</code>]</p></li>

<li><p><code>df.dropna()</code> → <strong>remove rows</strong> with NaN</p></li>

<li><p><code>df.fillna(new_value)</code> → <strong>replace</strong> missing values</p></li>

<li><p><code>df.apply(lambda_function)</code> → apply a lambda function to the <em>df</em></p></li>

<li><p><code>df.iloc[0:n,:]</code> → select the first <em>n</em> rows and all the columns</p></li>

<li><p><code>df.loc[44,:]</code> → select line 44 [only usable if there is an <em>index</em> in the dataframe]</p></li>

<li><p><code>df[df[&quot;Area&quot;] == &quot;Ireland”]</code> → select rows where <em>Area</em> is <em>Ireland</em></p></li>

<li><p><code>pd.to_datetime(data, )</code> → <strong>convert to datetime</strong> format <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html">doc</a></p></li>

<li><p><code>df['columnName'].rolling(int).mean()</code> → return a Series with the moving average of the data [<code>int</code> is the window size]</p>

<ul>
<li><code>mean()</code> can be replaced by whichever needed method</li>
</ul></li>
</ul>

<hr />

<h3 id="data-analysis">Data Analysis</h3>

<ul>
<li><p><code>df['columnName'].sum()</code></p></li>

<li><p><code>df['columnName'].mean()</code></p></li>

<li><p><code>df['columnName'].count()</code></p></li>

<li><p><code>df['columnName'].median()</code></p></li>

<li><p><code>df.min()</code> and <code>df.max()</code></p></li>

<li><p><code>df.corr(method=Pearson)</code> → compute pairwise correlation of columns (<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corr.html#pandas-dataframe-corr">doc</a>) - (<a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">Pearson Correlation Coefficient - Wikipedia</a>).</p></li>
</ul>

<hr />

<h3 id="merging-and-joining-dataframes">Merging and Joining dataframes</h3>

<p>Merge <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html">docs</a>, <a href="https://www.shanelynn.ie/merge-join-dataframes-python-pandas-index-1/">tutorial</a></p>
<div class="highlight"><pre style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py">new_df <span style="color:#666">=</span> pd<span style="color:#666">.</span>merge(df_1,
                  df_2[[<span style="color:#ba2121">&#39;use_id&#39;</span>, <span style="color:#ba2121">&#39;column2&#39;</span>, <span style="color:#ba2121">&#39;column3&#39;</span>]],
                  on<span style="color:#666">=</span><span style="color:#ba2121">&#39;use_id&#39;</span>, <span style="color:#408080;font-style:italic"># set the common column to merge on</span>
				  <span style="color:#408080;font-style:italic">## [no need to be called the same]</span>
				  how <span style="color:#666">=</span> <span style="color:#ba2121">&#39;inner&#39;</span>, <span style="color:#408080;font-style:italic"># specify merge type</span>
				  indicator<span style="color:#666">=</span>True <span style="color:#408080;font-style:italic"># create new column that explain if the row was present in both df or just one</span>
				  )</code></pre></div>
<h4 id="merge-types">Merge types</h4>

<ul>
<li><p><strong>Inner merge</strong> (default): <em>keeps only the common values</em> in both the left and right dataframes for the result</p></li>

<li><p><strong>Left merge</strong> or <strong>Right merge</strong>: <em>keep every row in the left or right dataframe</em>. If there are missing values in the <code>on</code> column of the left/right dataframe, add empty/NaN values in the result.</p></li>

<li><p><strong>Outer merge</strong>: <em>returns all the rows from the left dataframe, all the rows from the right dataframe, and matches up rows where possible</em>, with NaNs elsewhere.</p>

<ul>
<li><strong>WARNING: merging on <em>float</em> can be painful</strong>. Merge on <em>int</em> or <em>string</em>.</li>
</ul></li>
</ul>



        </main>
    </div>
    <div class="container border-top border-dark">
    <nav class="navbar navbar-light justify-content-center">
        <div class="navbar-nav d-flex flex-row justify-content-center">
            
            
            
            <a class="nav-item nav-link active" href="https://github.com/damianolodi"
                style="margin:10px;"><i data-feather="github"></i> GitHub</a>
            
            
            
            <a class="nav-item nav-link active" href="https://www.linkedin.com/in/damiano-lodi/"
                style="margin:10px;"><i data-feather="linkedin"></i> LinkedIn</a>
            
        </div>
    </nav>
</div>
    

<script src="https://damnotes.netlify.com/js/feather.min.js"></script>
<script>
    feather.replace()
</script>
</body>

</html>